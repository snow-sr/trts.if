import{u as T}from"./index.862f5e6b.js";class v{constructor(n,t,r,i,s){this.score=n,this.user={name:t,id:r},this.game={time:i,token:s}}}function D(e,n,t){console.log(e,n,t);let r=new v(e,n.name,n.id,t.time,t.token);console.log(r)}const h=document.getElementById("canvas"),a=h.getContext("2d");a.scale(30,30);var u=!1,x=document.getElementById("score");function I(){let e=1;e:for(let n=l.length-1;n>0;--n){for(let r=0;r<l[n].length;++r)if(l[n][r]===0)continue e;const t=l.splice(n,1)[0].fill(0);l.unshift(t),++n,o.score+=e*10,B(),e*=2}}function d(e,n){const t=n.matrix,r=n.pos;for(let i=0;i<t.length;++i)for(let s=0;s<t[i].length;++s)if(t[i][s]!==0&&(e[i+r.y]&&e[i+r.y][s+r.x])!==0)return!0;return!1}function L(e,n){const t=[];for(;n--;)t.push(new Array(e).fill(0));return t}function P(e){if(e==="I")return[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]];if(e==="L")return[[0,2,0],[0,2,0],[0,2,2]];if(e==="J")return[[0,3,0],[0,3,0],[3,3,0]];if(e==="O")return[[4,4],[4,4]];if(e==="Z")return[[5,5,0],[0,5,5],[0,0,0]];if(e==="S")return[[0,6,6],[6,6,0],[0,0,0]];if(e==="T")return[[0,7,0],[7,7,7],[0,0,0]]}function F(e,n){e.forEach((t,r)=>{t.forEach((i,s)=>{i!==0&&(a.fillStyle=J[i],a.fillRect(s+n.x,r+n.y,1,1))})})}function R(){a.fillStyle="#1B2C37",a.fillRect(0,0,h.width,h.height),F(l,{x:0,y:0}),F(o.matrix,o.pos)}function M(e,n){n.matrix.forEach((t,r)=>{t.forEach((i,s)=>{i!==0&&(e[r+n.pos.y][s+n.pos.x]=i)})})}function S(e,n){for(let t=0;t<e.length;++t)for(let r=0;r<t;++r)[e[r][t],e[t][r]]=[e[t][r],e[r][t]];n>0?e.forEach(t=>t.reverse()):e.reverse()}function q(){u=!0,x.innerText="PAUSE"}function A(){u==!0&&(u=!1,p(0),x.innerText=o.score)}function B(){console.log("Speed up:"+f),f-=100,c.setGameTime(f)}function G(){o.alive=!0,l.forEach(e=>e.fill(0)),o.score=0,y(),g(c),p(0)}function E(){o.pos.y++,d(l,o)&&o.alive==!0&&(o.pos.y--,M(l,o),y(),I(),g(c)),m=0}function C(e){o.pos.x+=e,d(l,o)&&(o.pos.x-=e)}function y(){const e="TJLOSZI";o.matrix=P(e[e.length*Math.random()|0]),o.pos.y=0,o.pos.x=(l[0].length/2|0)-(o.matrix[0].length/2|0),d(l,o)&&(o.alive=!1)}function k(e){const n=o.pos.x;let t=1;for(S(o.matrix,e);d(l,o);)if(o.pos.x+=t,t=-(t+(t>0?1:-1)),t>o.matrix[0].length){S(o.matrix,-e),o.pos.x=n;return}}let m=0,f=1e3,w=0;function p(e=0){if(u==!1&&o.alive==!0)m+=e-w,m>f&&E(),w=e,R(),requestAnimationFrame(p),c.setPlayer(o);else if(o.alive==!1){let n={name:"hahaha",id:"1111"},t=o.score,r={time:new Date().toLocaleString(),token:"127381728"};D(t,n,r),x.innerText=`Fim! Seu resultado final foi de:${o.score} 

 Pressione enter para reiniciar`}}function g(e){e.setPlayer(o.score)}document.addEventListener("keydown",e=>{e.keyCode===37?C(-1):e.keyCode===39?C(1):e.keyCode===40?E():e.keyCode===81?k(-1):e.keyCode===87?k(1):e.keyCode===80?q():e.keyCode===32?A():e.keyCode===13&&G()});const J=[null,"#FF0D79","#0DC2FF","#0DFF72","#F538FF","#FF8E0D","#FFE138","#3877FF"],l=L(12,20),o={pos:{x:0,y:0},matrix:null,score:0,alive:!0},c=T();y();g(c);p();export{J as colors,o as player};
