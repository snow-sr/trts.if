import{u as v}from"./index.08406a29.js";class D{constructor(n,t,r,s,l){this.score=n,this.user={name:t,id:r},this.game={time:s,token:l}}}function I(e,n,t){console.log(e,n,t);let r=new D(e,n.name,n.id,t.time,t.token);console.log(r)}const m=document.getElementById("canvas"),c=m.getContext("2d");c.scale(30,30);var d=!1,y=document.getElementById("score");function L(){let e=1;e:for(let n=i.length-1;n>0;--n){for(let r=0;r<i[n].length;++r)if(i[n][r]===0)continue e;const t=i.splice(n,1)[0].fill(0);i.unshift(t),++n,o.score+=e*10,e*=2}}function p(e,n){const t=n.matrix,r=n.pos;for(let s=0;s<t.length;++s)for(let l=0;l<t[s].length;++l)if(t[s][l]!==0&&(e[s+r.y]&&e[s+r.y][l+r.x])!==0)return!0;return!1}function P(e,n){const t=[];for(;n--;)t.push(new Array(e).fill(0));return t}function R(e){if(e==="I")return[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]];if(e==="L")return[[0,2,0],[0,2,0],[0,2,2]];if(e==="J")return[[0,3,0],[0,3,0],[3,3,0]];if(e==="O")return[[4,4],[4,4]];if(e==="Z")return[[5,5,0],[0,5,5],[0,0,0]];if(e==="S")return[[0,6,6],[6,6,0],[0,0,0]];if(e==="T")return[[0,7,0],[7,7,7],[0,0,0]]}function S(e,n){e.forEach((t,r)=>{t.forEach((s,l)=>{s!==0&&(c.fillStyle=O[s],c.fillRect(l+n.x,r+n.y,1,1))})})}function M(){c.fillStyle="#1B2C37",c.fillRect(0,0,m.width,m.height),S(i,{x:0,y:0}),S(o.matrix,o.pos)}function q(e,n){n.matrix.forEach((t,r)=>{t.forEach((s,l)=>{s!==0&&(e[r+n.pos.y][l+n.pos.x]=s)})})}function C(e,n){for(let t=0;t<e.length;++t)for(let r=0;r<t;++r)[e[r][t],e[t][r]]=[e[t][r],e[r][t]];n>0?e.forEach(t=>t.reverse()):e.reverse()}function A(){d=!0,y.innerText="PAUSE"}function B(){d==!0&&(d=!1,h(0),y.innerText=o.score)}var u=!1;function G(){o.score%10===0&&o.score!==0&&!u&&(console.log("speed up",a,o.score,u),a-=1e3,u=!0,console.log("speed up",a,o.score,u)),f.setGameTime(a)}function J(){o.alive=!0,i.forEach(e=>e.fill(0)),o.score=0,g(),F(f),h(0)}function T(){o.pos.y++,p(i,o)&&o.alive==!0&&(o.pos.y--,q(i,o),g(),L(),F(f)),x=0}function k(e){o.pos.x+=e,p(i,o)&&(o.pos.x-=e)}function g(){const e="TJLOSZI";o.matrix=R(e[e.length*Math.random()|0]),o.pos.y=0,o.pos.x=(i[0].length/2|0)-(o.matrix[0].length/2|0),p(i,o)&&(o.alive=!1)}function w(e){const n=o.pos.x;let t=1;for(C(o.matrix,e);p(i,o);)if(o.pos.x+=t,t=-(t+(t>0?1:-1)),t>o.matrix[0].length){C(o.matrix,-e),o.pos.x=n;return}}let x=0,a=1e3,E=0;function h(e=0){if(d==!1&&o.alive==!0)x+=e-E,x>a&&T(),E=e,G(),M(),requestAnimationFrame(h),f.setPlayer(o);else if(o.alive==!1){let n={name:"hahaha",id:"1111"},t=o.score,r={time:new Date().toLocaleString(),token:"127381728"};I(t,n,r),y.innerText=`Fim! Seu resultado final foi de:${o.score} 

 Pressione enter para reiniciar`}}function F(e){e.setPlayer(o.score)}document.addEventListener("keydown",e=>{e.keyCode===37?k(-1):e.keyCode===39?k(1):e.keyCode===40?T():e.keyCode===81?w(-1):e.keyCode===87?w(1):e.keyCode===80?A():e.keyCode===32?B():e.keyCode===13&&J()});const O=[null,"#FF0D79","#0DC2FF","#0DFF72","#F538FF","#FF8E0D","#FFE138","#3877FF"],i=P(12,20),o={pos:{x:0,y:0},matrix:null,score:0,alive:!0},f=v();g();F(f);h();export{O as colors,o as player};
